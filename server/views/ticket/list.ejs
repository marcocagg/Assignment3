<%- include ("../partials/header") %>
<%- include ("../partials/main_nav") %>
<main class="container">
    <div class="listdisplay">
      <div class="row">
        <!--col-md-16 describes how long the toal table will be, all columns must add up to 16 to display properly-->
        <div class="col-md-offset-3 col-md-16"> 
            <h1 class="ticketTitle" style="text-align: center"><%= title %></h1>
            <br>
            <!--Button for adding a new object to the database-->
            <a href="/tickets/add" class="btn btn-primary" role="button">
              <i class="fa-solid fa-envelope"></i> Submit a Ticket </a>
            <br>
            <br>
      <!--Displays table for all of the objects in the database-->      
      <table class="table table-bordered table-striped table-hover">
      <tr> 
        <!--Displays the headers of the table -->
        <th class="text-center col-2"> Name </th>
        <th class="text-center col-7"> Request Details </th>
        <th class="text-center col-1"> Date Requested </th>
        <th class="text-center col-1"> Priority </th>
        <th class="text-center col-2"> Status </th>
        <th class="text-center col-2"> Edit </th>
        <th class="text-center col-1"> Delete </th>
      </tr>
      <!--Goes through the database and adds the objects in it and displays it to the table-->
      <!--Also displays edit and delete buttons for each object in the database-->
      <% for(let count=0; count<Ticketlist.length; count++) { %> 
        <tr> 
            <td class="text-center col-2"> <%= Ticketlist[count].name %> </td>
            <td class="text-center col-7"> <%= Ticketlist[count].request %></td>
            <td class="text-center col-1"> <%= Ticketlist[count].date %></td>
            <td class="text-center col-1"> <%= Ticketlist[count].priority %></td>
            <td class="text-center col-2"> <%= Ticketlist[count].status %></td>
            <td class="text-center col-2">
             <a href="/tickets/edit/<%= Ticketlist[count]._id %>"
             class="btn btn-primary">
             <i class="fa-solid fa-gear"></i> Edit </a> </td>
            <td class="text-center col-1">
             <a href="/tickets/delete/<%= Ticketlist[count]._id %>"
             class="btn btn-danger">
             <i class="fas fa-trash-alt"></i> Delete </a> </td>
        </tr> 
      <% } %>
      </table>
      </div>
      </div>
      </div>
</main>
<%- include ("../partials/bottom_nav") %>
<%- include ("../partials/footer") %>
